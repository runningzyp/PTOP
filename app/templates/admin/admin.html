{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}后台管理 {% endblock %}
{% block head %}
{{super()}}
<link rel="stylesheet" href="/static/css/admin.css">
<link rel="stylesheet" href="/static/css/editormd.min.css">
{% endblock %}
{% block navbar %}
<div class="navbar navbar-inverse navbar-fixed-top " role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">Hello</div>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="{{ url_for('main.index') }}">主页</a></li>
                {% if current_user.is_authenticated %}
                <li><a href="{{ url_for('main.user', username=current_user.username) }}">文件</a></li>
           
                {% endif %}
            </ul>
            <ul class="nav navbar-nav navbar-right">
                {% if current_user.is_authenticated %}
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">

                        欢迎你, {{current_user.username}} <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="">更改密码</a></li>
                        <!-- <li><a href="">Change Email</a></li> -->
                        <li><a href="{{url_for('admin.admin_logout')}}">退出登录</a></li>
                    </ul>
                </li>
                {% else %}
                <li><a href="{{ url_for('admin.admin-login') }}">登录</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}
{% block content %}
<div class="container-fluid container-my">
    <div class="row">

        <!-- 侧边栏 -->
        <div class="col-xs-3 col-md-2 sidebar"> 
            <ul class="nav nav-sidebar">
                <li id = "articles"><a href="#">文章列表</a></li>
                <li id = "write-article"><a href="#">写文章</a></li>
                <li id = "users"><a href="#">用户管理</a></li>
                <li><a href="#">Export</a></li>
            </ul>            
        </div>


        <div class="col-xs-9 col-md-10 col-xs-offset-3 col-md-offset-2 content" >

            <!-- 显示博客文章模块 -->
            <div class="articles hidden block">
                <h1> 文章列表</h1>
                <div class="table-responsive ">
                        <table class="table table-bordered  table-hover table-striped">
                                <thead>
                                        <tr>
                                          <th>文章ID</th>
                                          <th>标题</th>
                                          <th>日期</th>
                                          <th>类型</th>
                                          <th>操作</th>
                                        </tr>
                                 </thead>
                                 <tbody id = "tbarticle">
                                </tbody>
                        </table>
                    </div>

                    <nav aria-label="Page navigation">
                            <ul class="pagination pagination-my">
                              <li class = 'prev-page'><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
                              {% for page in article_pages %}
                              <li class ="{{page}}"> <a href="#">{{page}}</a></li>
                              {% endfor %}
                              <li class = next-page><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
                            </ul>
                     </nav>
            </div>
            <!-- -->

            <!-- 写文章模块 -->
            <div class="write-article hidden block">
        
                    <form method="post">
                        {{form.hidden_tag()}}
                        <div id="blog-editormd" class="form-control">
                            {{form.body(class="form-control",required="required",style="display:none;",id="ts")}}
                        </div>
                        {{ wtf.form_field(form.title,class= "form-control") }}
                        {{ wtf.form_field(form.article_type_id,class= "form-control") }}
                        <button type="submit" class="btn btn-primary form-control">提交</button>
                    </form>
            </div>
             <!-- -->


            <!-- 用户模块 -->
            <div class="users hidden block">
                    <h1>用户列表</h1>
                    <div class="table-responsive ">
                            <table class="table table-bordered table-hover table-striped">
                                    <thead>
                                            <tr>
                                              <th>用户</th>
                                              <th>用户名</th>
                                              <th>userkey</th>
                                              <th>用户权限</th>
                                              <th>操作</th>
                                            </tr>
                                     </thead>
                                     <tbody id = "tbuser">
                                    </tbody>
                            </table>
                        </div>
    
                        <nav aria-label="Page navigation">
                                <ul class="pagination pagination-my">
                                  <li class = 'prev-page'><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
                                  {% for page in user_pages %}
                                  <li class ="{{page}}"> <a href="#">{{page}}</a></li>
                                  {% endfor %}
                                  <li class = next-page><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
                                </ul>
                         </nav>
            </div>
            <!--  -->

        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{super()}}
<script>
var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>

<script src="../../static/js/admin.js"></script>
<script src="../../static/js/editormd.js"></script>
<script src="../../static/editormd/plugins/emoji-dialog/emoji-dialog.js"></script>
<script src="../../static/editormd/plugins/image-dialog-qiniu/image-dialog-qiniu.js"></script>


<script>
    // $("#ts").append('hello'); //添加内容的方法
   
</script>
{% endblock %}